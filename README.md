# 🎙️ غرفة صوتية - Voice Chat Room

غرفة محادثة صوتية جماعية في الوقت الفعلي باستخدام WebRTC و Socket.IO.

## ✨ المميزات

- 🎤 محادثة صوتية جماعية في الوقت الفعلي
- 👥 دعم عدد غير محدود من المستخدمين في الغرفة الواحدة
- 🔇 إمكانية كتم/إلغاء كتم الصوت
- 🔗 مشاركة رابط الغرفة بسهولة
- 📱 متجاوب مع جميع الأجهزة
- 🎨 واجهة مستخدم جميلة وسهلة الاستخدام
- 🌐 دعم اللغة العربية بالكامل

## 🛠️ التقنيات المستخدمة

- **Backend**: Node.js + Express + Socket.IO
- **Frontend**: HTML5, CSS3, JavaScript (Vanilla)
- **WebRTC**: للمحادثات الصوتية P2P
- **STUN Servers**: Google STUN servers للاتصال

## 📋 المتطلبات

- Node.js (الإصدار 14 أو أحدث)
- npm أو yarn
- متصفح ويب حديث يدعم WebRTC (Chrome, Firefox, Safari, Edge)

## 🚀 التثبيت والتشغيل المحلي

### 1. تحميل الملفات
```bash
cd voice-chat-room
```

### 2. تثبيت الحزم
```bash
npm install
```

### 3. تشغيل الخادم
```bash
npm start
```

### 4. فتح المتصفح
افتح المتصفح على: `http://localhost:3000`

## 🌐 النشر على cPanel

### الطريقة 1: استخدام Node.js App في cPanel (الموصى بها)

#### الخطوة 1: رفع الملفات
1. سجل الدخول إلى cPanel
2. افتح **File Manager**
3. انتقل إلى المجلد المناسب (مثل `public_html` أو أنشئ مجلد جديد)
4. ارفع جميع ملفات المشروع

#### الخطوة 2: إعداد Node.js App
1. في cPanel، ابحث عن **Setup Node.js App**
2. انقر على **Create Application**
3. املأ البيانات التالية:
   - **Node.js version**: اختر أحدث إصدار (14.x أو أحدث)
   - **Application mode**: Production
   - **Application root**: اختر مجلد المشروع
   - **Application URL**: اختر النطاق أو النطاق الفرعي
   - **Application startup file**: `server.js`
4. انقر على **Create**

#### الخطوة 3: تثبيت الحزم
1. بعد إنشاء التطبيق، انقر على **Run NPM Install**
2. انتظر حتى انتهاء التثبيت

#### الخطوة 4: تشغيل التطبيق
1. انقر على **Start Application**
2. التطبيق الآن يعمل!

### الطريقة 2: استخدام SSH (للمستخدمين المتقدمين)

```bash
# الاتصال بالخادم عبر SSH
ssh your-username@your-domain.com

# الانتقال إلى مجلد المشروع
cd ~/public_html/voice-chat-room

# تثبيت الحزم
npm install

# تشغيل التطبيق باستخدام PM2
npm install -g pm2
pm2 start server.js --name voice-chat
pm2 save
pm2 startup
```

### ⚙️ إعدادات إضافية

#### تغيير المنفذ (Port)
إذا كنت بحاجة لتغيير المنفذ، يمكنك تعيين متغير بيئة `PORT`:
```bash
export PORT=3001
```
أو تعديل الملف `server.js` مباشرة.

#### استخدام HTTPS (SSL)
لتشغيل WebRTC بشكل صحيح، يُفضل استخدام HTTPS:
1. احصل على شهادة SSL من cPanel (Let's Encrypt مجاني)
2. تأكد من أن النطاق يستخدم HTTPS
3. WebRTC يعمل بشكل أفضل مع HTTPS

#### استخدام خادم TURN (اختياري)
لتحسين الاتصال للمستخدمين خلف جدران الحماية:
1. سجل في خدمة TURN مثل [Twilio](https://www.twilio.com/stun-turn) أو [Xirsys](https://xirsys.com/)
2. أضف إعدادات TURN في ملف `app.js`:

```javascript
const configuration = {
    iceServers: [
        { urls: 'stun:stun.l.google.com:19302' },
        { 
            urls: 'turn:your-turn-server.com:3478',
            username: 'your-username',
            credential: 'your-password'
        }
    ]
};
```

## 📖 كيفية الاستخدام

### للمستخدمين

1. **الدخول إلى الموقع**
   - افتح رابط الموقع في المتصفح

2. **الانضمام إلى غرفة**
   - أدخل اسمك
   - أدخل رقم الغرفة (أو اتركه فارغاً لإنشاء غرفة جديدة)
   - انقر على "انضم الآن"
   - اسمح بالوصول إلى الميكروفون

3. **في الغرفة**
   - يمكنك رؤية جميع المستخدمين المتصلين
   - انقر على "كتم الصوت" لإيقاف/تشغيل الميكروفون
   - انسخ رابط الغرفة وشاركه مع الآخرين

4. **دعوة الأصدقاء**
   - انقر على "نسخ رابط الغرفة"
   - أرسل الرابط للأصدقاء
   - عندما يفتحون الرابط، سينضمون تلقائياً لنفس الغرفة

## 🔧 استكشاف الأخطاء

### المشكلة: لا يعمل الصوت
**الحل:**
- تأكد من السماح بالوصول للميكروفون في المتصفح
- تأكد من أن الموقع يستخدم HTTPS (مطلوب لـ WebRTC في معظم المتصفحات)
- تحقق من إعدادات الصوت في نظام التشغيل

### المشكلة: لا يمكن الاتصال بالمستخدمين الآخرين
**الحل:**
- تحقق من اتصال الإنترنت
- تأكد من تشغيل الخادم بشكل صحيح
- قد تحتاج إلى خادم TURN إذا كان المستخدمون خلف جدران حماية صارمة

### المشكلة: الخادم لا يعمل على cPanel
**الحل:**
- تأكد من أن الاستضافة تدعم Node.js
- تحقق من المنفذ المستخدم (بعض الاستضافات تحدد منافذ معينة)
- تحقق من سجلات الأخطاء في cPanel

## 🔐 الأمان والخصوصية

- جميع الاتصالات الصوتية هي P2P (نظير إلى نظير)
- الخادم يستخدم فقط للإشارات، لا يمر الصوت عبر الخادم
- لا يتم تسجيل أو حفظ المحادثات
- استخدم HTTPS دائماً للحماية

## 🎯 التطويرات المستقبلية

- [ ] إضافة الفيديو
- [ ] إضافة محادثة نصية
- [ ] حفظ سجل الغرف
- [ ] مشاركة الملفات
- [ ] تسجيل المحادثات (اختياري)
- [ ] نظام مدير الغرفة

## 📝 الترخيص

هذا المشروع مفتوح المصدر ومتاح للاستخدام الحر.

## 🤝 المساهمة

نرحب بجميع المساهمات! إذا كانت لديك أفكار لتحسين المشروع:
1. قم بعمل Fork للمشروع
2. أضف التحسينات
3. أرسل Pull Request

## 📞 الدعم

إذا واجهت أي مشاكل أو كان لديك أسئلة:
- افتح Issue على GitHub
- راسلنا عبر البريد الإلكتروني

## 🌟 شكر خاص

- Socket.IO - للاتصالات في الوقت الفعلي
- WebRTC - لتقنية الاتصال الصوتي
- Google STUN servers - للمساعدة في اختراق NAT

---

صُنع بـ ❤️ للمجتمع العربي

**استمتع بمحادثاتك الصوتية! 🎉**

